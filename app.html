<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YouStillMatter — Calm tools, grounding, and a crisis card</title>

  <!-- SEO / Share -->
  <meta name="description" content="YouStillMatter is a private, phone-friendly set of calming tools, grounding exercises, and a crisis card." />
  <meta property="og:title" content="YouStillMatter" />
  <meta property="og:description" content="Private, offline-friendly calming tools and a crisis card." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://app.youstillmatter.org" />
  <!-- If you have a square logo hosted somewhere, set this: -->
  <!-- <meta property="og:image" content="https://your-static-site/logo-1200.png" /> -->

  <!-- Favicons (optional; swap these to your hosted images if you have them) -->
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-icon.png" />

  <!-- Theme color for mobile UI chrome -->
  <meta name="theme-color" content="#0b1220" />

  <style>
    :root {
      --brand:#0EA5E9;
      --ink:#0b1220;
      --paper:#F8FAFC;
      --muted:#6b7280;
      --ring: var(--brand);
      color-scheme: light dark;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--ink);
      background: var(--paper);
      display: grid;
      place-items: start center;
    }
    .wrap { width: 100%; max-width: 880px; padding: 24px; }
    header { text-align: center; margin: 8px 0 20px; }
    .logo {
      width: 96px; height: 96px; border-radius: 999px; display: block; margin: 12px auto;
      object-fit: cover; background: #fff;
      box-shadow: 0 1px 0 rgba(0,0,0,.06), 0 6px 24px rgba(0,0,0,.08);
    }
    h1 { margin: 10px 0 8px; font-size: clamp(24px, 3.8vw, 36px); line-height: 1.1; }
    p.sub { margin: 0; color: var(--muted); }
    .cta {
      display: grid; gap: 12px; grid-template-columns: 1fr; margin: 20px 0 8px;
    }
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 10px;
      padding: 14px 18px; border-radius: 14px; border: 1px solid #d1d5db; background: #fff;
      text-decoration: none; color: var(--ink); font-weight: 600;
      transition: transform .02s ease, background .2s ease;
    }
    .btn:hover { background: #ffffffd9; }
    .btn:active { transform: translateY(1px); }
    .btn-primary {
      background: var(--brand); color: #fff; border-color: var(--brand);
    }
    .btn-wide { width: 100%; }
    .note { font-size: 13px; color: var(--muted); }

    .panel { border: 1px solid #e5e7eb; border-radius: 16px; background: #fff; padding: 16px; }
    .grid { display: grid; gap: 16px; }
    .grid-2 { grid-template-columns: 1fr; }
    @media (min-width: 860px) {
      .grid-2 { grid-template-columns: 1.2fr 1fr; }
    }
    .qr {
      display: grid; place-items: center; padding: 10px;
    }
    .qr img { width: 180px; height: 180px; image-rendering: pixelated; border-radius: 12px; background: #fff; }
    .list { margin: 0; padding-left: 18px; }
    .list li { margin: 6px 0; }
    footer { margin: 28px 0 8px; font-size: 12px; color: var(--muted); text-align: center; }
    .kbd {
      display: inline-block; border: 1px solid #d1d5db; border-bottom-width: 2px; background: #fff;
      padding: 2px 6px; border-radius: 6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 12px;
    }
    .hidden { display: none !important; }
    .success { color: #065f46; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <!-- Swap src to your hosted logo if desired -->
      <img class="logo" alt="" src="https://app.youstillmatter.org/logo.png" />
      <h1>YouStillMatter</h1>
      <p class="sub">Private, offline-friendly calming tools and a crisis card.</p>
    </header>

    <div class="cta">
      <a class="btn btn-primary btn-wide" href="https://app.youstillmatter.org" rel="noopener">Open the App</a>
      <button id="installBtn" class="btn btn-wide hidden" type="button">Install the App</button>
      <div id="installedNote" class="note hidden success">Installed ✓ — open from your home screen or apps list.</div>
    </div>

    <div class="grid grid-2">
      <!-- Left: platform instructions -->
      <section class="panel">
        <h2 style="margin:6px 0 8px;font-size:18px;">Install instructions</h2>
        <div id="iosBlock" class="note hidden">
          <strong>iPhone / iPad (Safari):</strong>
          <ol class="list">
            <li>Tap <span class="kbd">Share</span> (square with arrow) in Safari.</li>
            <li>Choose <span class="kbd">Add to Home Screen</span>.</li>
            <li>Tap <span class="kbd">Add</span> — YouStillMatter installs like an app.</li>
          </ol>
        </div>
        <div id="androidBlock" class="note hidden">
          <strong>Android (Chrome):</strong>
          <ol class="list">
            <li>Open the app link above in Chrome.</li>
            <li>Tap <span class="kbd">Install app</span> when prompted, or use ⋮ menu → <span class="kbd">Install app</span>.</li>
          </ol>
        </div>
        <div id="desktopBlock" class="note hidden">
          <strong>Desktop (Chrome/Edge):</strong>
          <ol class="list">
            <li>Open the app link above.</li>
            <li>Click the <span class="kbd">Install</span> icon in the address bar, or 3-dot menu → <span class="kbd">Install YouStillMatter</span>.</li>
          </ol>
        </div>
        <div id="fallbackBlock" class="note">
          If you don't see an install option, you can always use the web app at the link above — it works great on mobile.
        </div>
      </section>

      <!-- Right: QR + share -->
      <aside class="panel qr">
        <!-- Simple QR image; replace with your own hosted QR if you prefer -->
        <img
          id="qrImg"
          alt="QR code linking to app.youstillmatter.org"
          src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&margin=10&data=https%3A%2F%2Fapp.youstillmatter.org"
        />
        <div class="note" style="text-align:center;margin-top:10px">
          Scan with your phone camera to open the app
        </div>
        <div style="display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;justify-content:center">
          <button id="copyBtn" class="btn" type="button">Copy app link</button>
          <button id="shareBtn" class="btn" type="button">Share…</button>
        </div>
        <div id="copyNote" class="note hidden">Link copied ✓</div>
      </aside>
    </div>

    <footer>
      © <span id="year"></span> YouStillMatter • Need help now? Call <a href="tel:988">988</a> or text <strong>HOME</strong> to <a href="sms:741741?&body=HOME">741741</a>.
    </footer>
  </div>

  <script>
    // --- Page basics
    document.getElementById('year').textContent = new Date().getFullYear();

    // --- Install handling (PWA-capable browsers)
    let deferredPrompt = null;
    const installBtn = document.getElementById('installBtn');
    const installedNote = document.getElementById('installedNote');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.classList.remove('hidden');
    });

    window.addEventListener('appinstalled', () => {
      installBtn.classList.add('hidden');
      installedNote.classList.remove('hidden');
    });

    installBtn.addEventListener('click', async () => {
      try {
        if (!deferredPrompt) return;
        await deferredPrompt.prompt();
        await deferredPrompt.userChoice;
        deferredPrompt = null;
      } catch {}
    });

    // --- Platform detection → show relevant instructions
    const ua = navigator.userAgent || '';
    const isIOS = /iPhone|iPad|iPod/.test(ua);
    const isSafari = /^((?!chrome|android).)*safari/i.test(ua);
    const isAndroid = /Android/.test(ua);
    const isDesktop = !isAndroid && !isIOS;

    const iosBlock = document.getElementById('iosBlock');
    const androidBlock = document.getElementById('androidBlock');
    const desktopBlock = document.getElementById('desktopBlock');

    if (isIOS && isSafari) iosBlock.classList.remove('hidden');
    else if (isAndroid) androidBlock.classList.remove('hidden');
    else desktopBlock.classList.remove('hidden');

    // --- Share & Copy
    const appUrl = 'https://app.youstillmatter.org';
    document.getElementById('copyBtn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(appUrl);
        document.getElementById('copyNote').classList.remove('hidden');
        setTimeout(() => document.getElementById('copyNote').classList.add('hidden'), 1500);
      } catch {}
    });

    document.getElementById('shareBtn').addEventListener('click', async () => {
      if (navigator.share) {
        try {
          await navigator.share({ title: 'YouStillMatter', text: 'Calming tools & crisis card', url: appUrl });
        } catch {}
      } else {
        // fallback: copy
        try {
          await navigator.clipboard.writeText(appUrl);
          document.getElementById('copyNote').classList.remove('hidden');
          setTimeout(() => document.getElementById('copyNote').classList.add('hidden'), 1500);
        } catch {}
      }
    });

    // --- (Optional) Simple analytics opt-in hook stub:
    // If you later want to add analytics, only load it after consent (e.g., localStorage flag).
    // const consent = localStorage.getItem('ysm_analytics_opt_in') === '1';
    // if (consent) { /* load script here */ }
  </script>
</body>
</html>
